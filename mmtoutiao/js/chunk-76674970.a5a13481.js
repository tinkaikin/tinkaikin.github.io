(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76674970"],{1102:function(t,e,n){"use strict";var r=n("f697"),a=n.n(r);a.a},1119:function(t,e,n){"use strict";var r=n("89cd"),a=n.n(r);a.a},"11e9":function(t,e,n){var r=n("52a7"),a=n("4630"),o=n("6821"),i=n("6a99"),c=n("69a8"),s=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=o(t),e=i(e,!0),s)try{return u(t,e)}catch(n){}if(c(t,e))return a(!r.f.call(t,e),t[e])}},"137e":function(t,e,n){},"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1e91":function(t,e,n){},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),a=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},"23d3":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("van-nav-bar",{attrs:{title:"黑马头条","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("div",[n("h2",{staticClass:"article-title"},[t._v(t._s(t.article.title))]),n("auth-info",{attrs:{article:t.article}}),n("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.article.content)}}),n("more-action"),n("comment-list",{attrs:{source:t.articleId+""}}),n("reply-list"),n("add-comment",{staticClass:"add-comment",attrs:{target:t.articleId+""}})],1)],1)},a=[],o=(n("96cf"),n("3b8d")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth-info"},[n("div",{staticClass:"base-info"},[n("img",{staticClass:"avatar",attrs:{src:t.article.aut_photo,alt:""}}),n("div",[n("p",[t._v(t._s(t.article.aut_name))]),n("p",[t._v(t._s(t._f("relTime")(t.article.pubdate)))])])]),n("div",[n("van-button",{attrs:{type:"danger",loading:t.isLoading},on:{click:function(e){t.关注切换()}}},[t._v(t._s(t.article.is_followed?"已关注":"关注下"))])],1)])},c=[],s=n("46ec"),u={name:"AuthInfo",props:{article:{type:Object,default:function(){}}},data:function(){return{isLoading:!1}},created:function(){},methods:{"关注切换":function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,e=this.article.is_followed,!e){t.next=7;break}return t.next=5,Object(s["e"])(this.article.aut_id);case 5:t.next=9;break;case 7:return t.next=9,Object(s["a"])(this.article.aut_id);case 9:this.article.is_followed=!e,this.isLoading=!1;case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},l=u,f=(n("739a"),n("2877")),d=Object(f["a"])(l,i,c,!1,null,"2f3c3913",null),p=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"more-action"},[n("van-button",{attrs:{icon:"star-o",round:"",loading:!1,type:"danger"}},[t._v("点赞")]),n("van-button",{attrs:{icon:"delete",round:"",loading:!1,type:"danger"}},[t._v("不喜欢")])],1)},v=[],h={name:"MoreAction",props:{},data:function(){return{}},methods:{}},b=h,_=(n("d6a2"),Object(f["a"])(b,m,v,!1,null,"6be77eb1",null)),g=_.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.com_List,function(e,r){return n("van-cell",{key:r},[n("div",{attrs:{slot:"icon"},slot:"icon"},[n("img",{staticClass:"avatar",attrs:{src:e.aut_photo,alt:""}})]),n("div",{attrs:{slot:"title"},slot:"title"},[n("span",[t._v(t._s(e.aut_name))])]),n("div",{attrs:{slot:"default"},slot:"default"},[n("van-button",{attrs:{icon:"like-o",size:"mini",plain:""}},[t._v("赞")])],1),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",[t._v(t._s(e.content))]),n("p",[n("span",[t._v(t._s(t._f("relTime")(e.pubdate)))]),t._v("\n          ·\n          "),n("span",{on:{click:function(n){return t.onshowReply(e)}}},[t._v("回复")])])])])}),1)],1)},O=[],w=n("75fc"),x=(n("c5f6"),n("a27e")),j=function(t){var e=t.isCommet,n=void 0===e||e,r=t.source,a=t.offset;return Object(x["a"])({method:"get",url:"/app/v1_0/comments",params:{type:n?"a":"c",source:r,offset:a}})},A=n("2b0e"),C=new A["a"],I={name:"CommentList",props:{isCommet:{type:Boolean,default:!0},source:{type:[String,Number]}},data:function(){return{loading:!1,finished:!1,com_List:[],offset:null}},created:function(){var t=this;C.$on("comment-list",function(){console.log("重新刷新"),t.onLoad()})},methods:{onLoad:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$sleep(800),t.next=3,j({isCommet:this.isCommet,source:this.source,offset:this.offset});case 3:e=t.sent,0===e.results.length?(this.loading=!1,this.finished=!0):((n=this.com_List).push.apply(n,Object(w["a"])(e.results)),this.offset=e.last_id,this.loading=!1);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onshowReply:function(t){C.$emit("reply-show",t)}}},k=I,E=(n("1102"),Object(f["a"])(k,y,O,!1,null,"25c32405",null)),N=E.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-popup",{style:{height:"75%"},attrs:{position:"bottom"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("van-cell",[n("div",{attrs:{slot:"icon"},slot:"icon"},[n("img",{staticClass:"avatar",attrs:{src:t.commentFirst.aut_photo,alt:""}})]),n("div",{attrs:{slot:"title"},slot:"title"},[n("span",[t._v(t._s(t.commentFirst.aut_name))]),n("van-tag",[t._v("楼主")])],1),n("div",{attrs:{slot:"default"},slot:"default"},[n("van-button",{attrs:{icon:"like-o",size:"mini",plain:""}},[t._v("赞")])],1),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",[t._v(t._s(t.commentFirst.content))]),n("p",[n("span",[t._v(t._s(t._f("relTime")(t.commentFirst.pubdate)))])])])]),n("hr"),n("CommentList",{attrs:{source:t.commentFirst.com_id+"",isCommet:!1}}),n("add-comment",{staticClass:"add-comment",attrs:{target:t.commentFirst.com_id+"",art_id:t.articleId+""}})],1)},S=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-comment"},[n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("div",{staticClass:"more-wrap"},[n("van-button",{attrs:{size:"small",disabled:!t.content.length||t.isNoFox},on:{click:t.handleAdd}},[t._v("发布")])],1)])},L=[],$=n("8691"),P={name:"AddComment",data:function(){return{content:"",isNoFox:!1}},props:{target:{type:[Number,String]},art_id:{type:[Number,String]}},methods:{handleAdd:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isNoFox=!0,t.prev=1,t.next=4,Object($["a"])({target:this.target,art_id:this.art_id,content:this.content});case 4:console.log("发表成功"),this.content="",this.isNoFox=!1,C.$emit("comment-list"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log("502"),this.content="";case 14:case"end":return t.stop()}},t,this,[[1,10]])}));function e(){return t.apply(this,arguments)}return e}()}},R=P,M=(n("e25c"),Object(f["a"])(R,T,L,!1,null,"6d50b02e",null)),G=M.exports,z={name:"ReplyList",components:{CommentList:N,AddComment:G},data:function(){return{isShow:!1,commentFirst:{}}},computed:{articleId:function(){return this.$route.params.articleId}},created:function(){var t=this;C.$on("reply-show",function(e){t.commentFirst=e,t.isShow=!0})}},D=z,H=(n("9c9b"),Object(f["a"])(D,F,S,!1,null,"14e6958f",null)),V=H.exports,B={name:"ArticleIndex",components:{AuthInfo:p,MoreAction:g,CommentList:N,ReplyList:V,AddComment:G},data:function(){return{article:{}}},computed:{articleId:function(){return this.$route.params.articleId}},created:function(){this.loadArticle()},methods:{loadArticle:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$toast.loading({duration:0,mask:!1,forbidClick:!0,message:"加载中..."}),t.prev=1,n=this.articleId,t.next=5,Object($["e"])(n);case 5:r=t.sent,this.article=r,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.$toast.fail("加载失败");case 12:e.clear();case 13:case"end":return t.stop()}},t,this,[[1,9]])}));function e(){return t.apply(this,arguments)}return e}()}},J=B,U=(n("1119"),Object(f["a"])(J,r,a,!1,null,"b7ae574a",null));e["default"]=U.exports},"46ec":function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"f",function(){return l});n("7f7f");var r=n("a27e"),a=function(t){var e=t.mobile,n=t.code;return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:{mobile:e,code:n}})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},i=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},s=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile\n\n"})},u=function(t){var e=t.name,n=t.photo,a=t.gender,o=t.birthday,i=t.realName,c=t.idNumber,s=t.idCardFront,u=t.idCardBack,l=t.idCardHandheld,f=t.intro;return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:{name:e,photo:n,gender:a,birthday:o,real_name:i,id_number:c,id_card_front:s,id_card_back:u,id_card_handheld:l,intro:f}})},l=function(t,e){var n=new FormData;return n.append(t,e),Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:n})}},"549b":function(t,e,n){"use strict";var r=n("d864"),a=n("63b6"),o=n("241e"),i=n("b0dc"),c=n("3702"),s=n("b447"),u=n("20fd"),l=n("7cd6");a(a.S+a.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,f,d=o(t),p="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,h=void 0!==v,b=0,_=l(d);if(h&&(v=r(v,m>2?arguments[2]:void 0,2)),void 0==_||p==Array&&c(_))for(e=s(d.length),n=new p(e);e>b;b++)u(n,b,h?v(d[b],b):d[b]);else for(f=_.call(d),n=new p;!(a=f.next()).done;b++)u(n,b,h?i(f,v,[a.value,b],!0):a.value);return n.length=b,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"5dbc":function(t,e,n){var r=n("d3f4"),a=n("8b97").set;t.exports=function(t,e,n){var o,i=e.constructor;return i!==n&&"function"==typeof i&&(o=i.prototype)!==n.prototype&&r(o)&&a&&a(t,o),t}},"739a":function(t,e,n){"use strict";var r=n("e1ea"),a=n.n(r);a.a},"75fc":function(t,e,n){"use strict";var r=n("a745"),a=n.n(r);function o(t){if(a()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var i=n("774e"),c=n.n(i),s=n("c8bb"),u=n.n(s);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return o(t)||l(t)||f()}n.d(e,"a",function(){return d})},"774e":function(t,e,n){t.exports=n("d2d5")},"7f7f":function(t,e,n){var r=n("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in a||n("9e1e")&&r(a,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8691:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"i",function(){return o}),n.d(e,"g",function(){return i}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"e",function(){return f}),n.d(e,"a",function(){return d});var r=n("a27e"),a=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},o=function(t){return Object(r["a"])({method:"put",url:"/app/v1_0/user/channels",data:{channels:t}})},i=function(){return Object(r["a"])({method:"get",url:"/app/v1_0/channels"})},c=function(t){var e=t.articleId,n=t.type,a=t.remark,o=void 0===a?"":a;return Object(r["a"])({method:"post",url:"/app/v1_0/article/reports",data:{target:e,type:n,remark:o}})},s=function(t){var e=t.channel_id,n=t.timestamp,a=t.with_top;return Object(r["a"])({method:"get",url:"/app/v1_1/articles",params:{channel_id:e,timestamp:n,with_top:a}})},u=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/dislikes",data:{target:t}})},l=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/blacklists",data:{target:t}})},f=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},d=function(t){var e=t.target,n=t.content,a=void 0===n?"":n,o=t.art_id,i=void 0===o?null:o;return Object(r["a"])({method:"POST",url:"/app/v1_0/comments",data:{target:e,content:a,art_id:i}})}},"89cd":function(t,e,n){},"8b97":function(t,e,n){var r=n("d3f4"),a=n("cb7c"),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},9003:function(t,e,n){var r=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},9093:function(t,e,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"95d5":function(t,e,n){var r=n("40c3"),a=n("5168")("iterator"),o=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||o.hasOwnProperty(r(e))}},"9c9b":function(t,e,n){"use strict";var r=n("a2d6"),a=n.n(r);a.a},a2d6:function(t,e,n){},a745:function(t,e,n){t.exports=n("f410")},aa77:function(t,e,n){var r=n("5ca1"),a=n("be13"),o=n("79e5"),i=n("fdef"),c="["+i+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(t,e,n){var a={},c=o(function(){return!!i[t]()||s[t]()!=s}),u=a[t]=c?e(d):i[t];n&&(a[n]=u),r(r.P+r.F*c,"String",a)},d=f.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},c5f6:function(t,e,n){"use strict";var r=n("7726"),a=n("69a8"),o=n("2d95"),i=n("5dbc"),c=n("6a99"),s=n("79e5"),u=n("9093").f,l=n("11e9").f,f=n("86cc").f,d=n("aa77").trim,p="Number",m=r[p],v=m,h=m.prototype,b=o(n("2aeb")(h))==p,_="trim"in String.prototype,g=function(t){var e=c(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():d(e,3);var n,r,a,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+e}for(var i,s=e.slice(2),u=0,l=s.length;u<l;u++)if(i=s.charCodeAt(u),i<48||i>a)return NaN;return parseInt(s,r)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(b?s(function(){h.valueOf.call(n)}):o(n)!=p)?i(new v(g(e)),n,m):g(e)};for(var y,O=n("9e1e")?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;O.length>w;w++)a(v,y=O[w])&&!a(m,y)&&f(m,y,l(v,y));m.prototype=h,h.constructor=m,n("2aba")(r,p,m)}},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d6a2:function(t,e,n){"use strict";var r=n("137e"),a=n.n(r);a.a},e1ea:function(t,e,n){},e25c:function(t,e,n){"use strict";var r=n("1e91"),a=n.n(r);a.a},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},f697:function(t,e,n){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-76674970.a5a13481.js.map