{"version":3,"sources":["webpack:///./src/api/users-api.js","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/个人编辑/index.vue?1194","webpack:///./src/views/个人编辑/components/upload-photo.vue?51fd","webpack:///src/views/个人编辑/components/upload-photo.vue","webpack:///./src/views/个人编辑/components/upload-photo.vue?dffe","webpack:///./src/views/个人编辑/components/upload-photo.vue","webpack:///src/views/个人编辑/index.vue","webpack:///./src/views/个人编辑/index.vue?7455","webpack:///./src/views/个人编辑/index.vue"],"names":["loginApi","_ref","mobile","code","request","method","url","data","followUser","userId","target","unFollowUser","concat","getCurrentUserInfo","getCurrentProfileInfo","updateUserProfile","_ref2","name","photo","gender","birthday","realName","idNumber","idCardFront","idCardBack","idCardHandheld","intro","real_name","id_number","id_card_front","id_card_back","id_card_handheld","updateUserPhoto","file","formData","FormData","append","dP","__webpack_require__","f","FProto","Function","prototype","nameRE","NAME","configurable","get","this","match","e","render","_vm","_h","$createElement","_c","_self","attrs","title","left-text","right-text","left-arrow","on","click-left","$event","$router","back","click-right","handleSave","is-link","click","isUploadPhotoShow","slot","width","src","user","alt","value","upload-success","model","callback","$$v","expression","staticRenderFns","upload_photovue_type_template_id_19008ac1_render","show-confirm-button","input","$emit","弹出系统选择框","ref","staticStyle","display","type","change","changeFile","upload_photovue_type_template_id_19008ac1_staticRenderFns","upload_photovue_type_script_lang_js_","props","Boolean","default","computed","fileDomObj","$refs","methods","_this","files","reader","FileReader","readAsDataURL","onload","aa","Object","image_preview","images","result","showIndex","onClose","openDia","_this2","$dialog","confirm","then","updateImage","catch","_updateImage","asyncToGenerator","regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","users_api","sent","$toast","stop","apply","arguments","components_upload_photovue_type_script_lang_js_","component","componentNormalizer","upload_photo","_vue_type_script_lang_js_","components","UploadPhoto","created","loadUserProfile","_handleSave","success","_loadUserProfile","_callee2","toast","_context2","loading","duration","mask","forbidClick","message","t0","fail","clear","views_vue_type_script_lang_js_","_component","__webpack_exports__"],"mappings":"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","file":"js/chunk-bd24661e.f5dece8c.js","sourcesContent":["/**\r\n * 用户相关的请求接口\r\n */\r\n\r\nimport request from '@/utils/axios'\r\n\r\n// 登录\r\nexport const loginApi = ({ mobile, code }) => {\r\n  return request({\r\n    method: 'POST',\r\n    url: `/app/v1_0/authorizations`,\r\n    data: { mobile, code }\r\n  })\r\n}\r\n\r\n/**\r\n * 关注用户\r\n */\r\nexport const followUser = userId => {\r\n  return request({\r\n    method: 'POST',\r\n    url: '/app/v1_0/user/followings',\r\n    data: {\r\n      target: userId\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n* 取消关注\r\n*/\r\nexport const unFollowUser = userId => {\r\n  return request({\r\n    method: 'DELETE',\r\n    url: `/app/v1_0/user/followings/${userId}`\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户自己信息\r\n * 接口文档的目标id 不用传->忽略\r\n */\r\n\r\nexport const getCurrentUserInfo = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/app/v1_0/user`\r\n  })\r\n}\r\n\r\n// 获取用户个人资料\r\n\r\nexport const getCurrentProfileInfo = () => {\r\n  return request({\r\n    method: 'GET',\r\n    url: `/app/v1_0/user/profile\r\n\r\n`\r\n  })\r\n}\r\n\r\n/**\r\n * 更新用户个人信息\r\n * axios 会把无效数据进行过滤，null、undefined 等数据\r\n */\r\nexport const updateUserProfile = ({\r\n  name, // 昵称\r\n  photo, // 头像 base64编码处理\r\n  gender, // 性别，0-男，1-女\r\n  birthday, // 生日，格式\r\n  realName, // 真实姓名\r\n  idNumber, // 身份证号\r\n  idCardFront, // 身份证正面照片   base64编码处理\r\n  idCardBack, // 身份证背面照片   base64编码处理\r\n  idCardHandheld, // 手持身份证照片   base64编码处理\r\n  intro // 个人介绍\r\n}) => {\r\n  return request({\r\n    method: 'PATCH',\r\n    url: `/app/v1_0/user/profile`,\r\n    data: {\r\n      name,\r\n      photo,\r\n      gender,\r\n      birthday,\r\n      real_name: realName,\r\n      id_number: idNumber,\r\n      id_card_front: idCardFront,\r\n      id_card_back: idCardBack,\r\n      id_card_handheld: idCardHandheld,\r\n      intro\r\n    }\r\n  })\r\n}\r\n\r\n// 更新用户头像\r\n// photo\tfile\t否\t\t头像\r\n// id_card_front\tfile\t否\t\t身份证正面照片\r\n// id_card_back\tfile\t否\t\t身份证背面照片\r\n// id_card_handheld\tfile\t否\t\t手持身份证照片\r\nexport const updateUserPhoto = (name, file) => {\r\n  const formData = new FormData()\r\n  formData.append(name, file)\r\n  return request({\r\n    method: 'PATCH',\r\n    url: `/app/v1_0/user/photo`,\r\n    data: formData\r\n  })\r\n}\r\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"个人信息\",\"left-text\":\"返回\",\"right-text\":\"保存\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()},\"click-right\":_vm.handleSave}}),_c('van-cell-group',[_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"头像\"},on:{\"click\":function($event){_vm.isUploadPhotoShow = true}}},[_c('div',{attrs:{\"slot\":\"default\"},slot:\"default\"},[_c('img',{attrs:{\"width\":\"30\",\"src\":_vm.user.photo,\"alt\":\"\"}})])]),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"昵称\",\"value\":_vm.user.name}}),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"介绍\",\"value\":\"内容\"}})],1),_c('van-cell-group',[_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"性别\",\"value\":_vm.user.gender === 0 ? '男' : '女'}}),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"生日\",\"value\":_vm.user.birthday}})],1),_c('upload-photo',{on:{\"upload-success\":function($event){_vm.user.photo=$event}},model:{value:(_vm.isUploadPhotoShow),callback:function ($$v) {_vm.isUploadPhotoShow=$$v},expression:\"isUploadPhotoShow\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-dialog',{attrs:{\"value\":_vm.value,\"show-confirm-button\":false},on:{\"input\":function($event){return _vm.$emit('input', $event)}}},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"从相册选择\"},on:{\"click\":function($event){_vm.弹出系统选择框()}}}),_c('input',{ref:\"input\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.changeFile}}),_c('van-cell',{attrs:{\"title\":\"拍照\"}}),_c('van-cell',{attrs:{\"title\":\"取消\"},on:{\"click\":function($event){return _vm.$emit('input', false)}}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-dialog :value=\"value\" @input=\"$emit('input', $event)\" :show-confirm-button=\"false\">\r\n      <van-cell-group>\r\n        <van-cell title=\"从相册选择\"  @click=\"弹出系统选择框()\"/>\r\n        <!-- 插入一个 文本域,隐藏->需要js来触发  -->\r\n        <input style=\"display: none;\" type=\"file\" ref=\"input\"\r\n         @change=\"changeFile\" >\r\n        <van-cell title=\"拍照\" />\r\n        <van-cell title=\"取消\" @click=\"$emit('input', false)\" />\r\n      </van-cell-group>\r\n    </van-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ImagePreview } from 'vant'\r\nimport { updateUserPhoto } from '../../../api/users-api.js'\r\nexport default {\r\n  name: 'UploadPhoto',\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    fileDomObj () {\r\n      return this.$refs['input']\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n    // 选中照片后触发-->获取上传的内容\r\n    changeFile (e) {\r\n      const photo = e.target.files[0]\r\n      // console.log(photo) // 2. 测试能不能获取到文件的内容\r\n      // 使用原生的对象转 base64\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(photo)\r\n      reader.onload = (aa) => {\r\n        // 获取返回的 结果有2种 一是: e的target.resilt 获取\r\n        // 二是: reader.result\r\n        // console.log(reader.result) // 3. 测试 能获取到 转base64的码了\r\n        ImagePreview({\r\n          images: [reader.result],\r\n          showIndex: false, // 是否显示页面码\r\n          // startPosition: 1,  // 默认显示第0张\r\n          onClose: () => {\r\n            // 预览关闭后触发--> // 打开对话框\r\n            this.openDia()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    openDia () {\r\n      // do something\r\n      // 打开确认框\r\n      this.$dialog\r\n        .confirm({\r\n          title: '是否确认修改头像'\r\n        })\r\n        .then(() => {\r\n          // 最后再这里上传图片\r\n          this.updateImage()\r\n        })\r\n        .catch(() => {})\r\n    },\r\n    //\r\n    async updateImage () {\r\n      // 先封装api\r\n      const res = await updateUserPhoto('photo', this.fileDomObj.files[0])\r\n      // console.log(res) // 4. 测试能获取到返回的内容了\r\n      if (res.photo) {\r\n        this.$emit('input', false) // 关闭\r\n        this.$emit('upload-success', res.photo) // 把结果传回组件\r\n      } else {\r\n        this.$toast('上传失败')\r\n      }\r\n    },\r\n    弹出系统选择框 () {\r\n      // console.log(this.fileDomObj) // 1. 测试 能获取到 input的dom对象\r\n      this.fileDomObj.click()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-photo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-photo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload-photo.vue?vue&type=template&id=19008ac1&\"\nimport script from \"./upload-photo.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-photo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <van-nav-bar title=\"个人信息\" left-text=\"返回\" right-text=\"保存\" left-arrow @click-left=\"$router.back()\" @click-right=\"handleSave\" />\r\n\r\n    <van-cell-group>\r\n      <van-cell is-link title=\"头像\" @click=\"isUploadPhotoShow = true\">\r\n        <div slot=\"default\">\r\n          <img width=\"30\" :src=\"user.photo\" alt=\"\">\r\n        </div>\r\n      </van-cell>\r\n      <van-cell is-link title=\"昵称\" :value=\"user.name\" />\r\n      <van-cell is-link title=\"介绍\" value=\"内容\" />\r\n    </van-cell-group>\r\n\r\n    <van-cell-group>\r\n      <van-cell is-link title=\"性别\" :value=\"user.gender === 0 ? '男' : '女'\" />\r\n      <van-cell is-link title=\"生日\" :value=\"user.birthday\" />\r\n    </van-cell-group>\r\n\r\n  <!-- 弹出更改图片的对话框 -->\r\n  <!-- @upload-success='user.photo=$event' 接收返回的值,并直接赋值了 -->\r\n  <upload-photo v-model=\"isUploadPhotoShow\" @upload-success='user.photo=$event'></upload-photo>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCurrentProfileInfo, updateUserProfile } from '../../api/users-api.js'\r\nimport UploadPhoto from './components/upload-photo'\r\nexport default {\r\n  name: 'UserProfile',\r\n  components: {\r\n    UploadPhoto\r\n  },\r\n  data () {\r\n    return {\r\n      user: {\r\n        name: null, // 昵称 只能1-7位数\r\n        photo: null, // 头像 base64编码处理\r\n        gender: null, // 性别，0-男，1-女\r\n        birthday: null, // 生日，格式'2018-12-20'\r\n        realName: null, // 真实姓名\r\n        idNumber: null, // 身份证号\r\n        idCardFront: null, // 身份证正面照片   base64编码处理\r\n        idCardBack: null, // 身份证背面照片   base64编码处理\r\n        idCardHandheld: null, // 手持身份证照片   base64编码处理\r\n        intro: null // 个人介绍\r\n      },\r\n      isUploadPhotoShow: false\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.loadUserProfile()\r\n  },\r\n\r\n  methods: {\r\n\r\n    async handleSave () {\r\n      // this.user.name = 'NoteBook'\r\n      // console.log(this.user) // 3. 测试看数据获取的到吗? ok\r\n      await updateUserProfile({\r\n        name: 'NoBook'\r\n      })\r\n      this.$toast.success('修改成功')\r\n      this.$router.back()\r\n      // console.log('修改成功', res) // 2. 测试修改一个数据后能不能成功\r\n    },\r\n    async loadUserProfile () {\r\n      const toast = this.$toast.loading({\r\n        duration: 0, // 配置为 0 表示持续展示 loading\r\n        mask: false, // 是否展示遮罩\r\n        forbidClick: true, // 禁用背景点击\r\n        message: '加载中...'\r\n      })\r\n      try {\r\n        const data = await getCurrentProfileInfo()\r\n        this.user = data\r\n        // console.log(data) // 1. 测试 能获取到数据\r\n      } catch (err) {\r\n        this.$toast.fail('加载用户信息失败')\r\n      }\r\n      toast.clear()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=04bed326&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04bed326\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}