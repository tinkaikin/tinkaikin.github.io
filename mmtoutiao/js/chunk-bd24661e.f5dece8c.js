(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd24661e"],{"46ec":function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"g",function(){return c}),n.d(e,"f",function(){return s});n("7f7f");var r=n("a27e"),a=function(t){var e=t.mobile,n=t.code;return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:{mobile:e,code:n}})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},i=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},u=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},l=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile\n\n"})},c=function(t){var e=t.name,n=t.photo,a=t.gender,o=t.birthday,i=t.realName,u=t.idNumber,l=t.idCardFront,c=t.idCardBack,s=t.idCardHandheld,d=t.intro;return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:{name:e,photo:n,gender:a,birthday:o,real_name:i,id_number:u,id_card_front:l,id_card_back:c,id_card_handheld:s,intro:d}})},s=function(t,e){var n=new FormData;return n.append(t,e),Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:n})}},"7f7f":function(t,e,n){var r=n("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in a||n("9e1e")&&r(a,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"82ed":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"个人信息","left-text":"返回","right-text":"保存","left-arrow":""},on:{"click-left":function(e){return t.$router.back()},"click-right":t.handleSave}}),n("van-cell-group",[n("van-cell",{attrs:{"is-link":"",title:"头像"},on:{click:function(e){t.isUploadPhotoShow=!0}}},[n("div",{attrs:{slot:"default"},slot:"default"},[n("img",{attrs:{width:"30",src:t.user.photo,alt:""}})])]),n("van-cell",{attrs:{"is-link":"",title:"昵称",value:t.user.name}}),n("van-cell",{attrs:{"is-link":"",title:"介绍",value:"内容"}})],1),n("van-cell-group",[n("van-cell",{attrs:{"is-link":"",title:"性别",value:0===t.user.gender?"男":"女"}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:t.user.birthday}})],1),n("upload-photo",{on:{"upload-success":function(e){t.user.photo=e}},model:{value:t.isUploadPhotoShow,callback:function(e){t.isUploadPhotoShow=e},expression:"isUploadPhotoShow"}})],1)},a=[],o=(n("96cf"),n("3b8d")),i=n("46ec"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-dialog",{attrs:{value:t.value,"show-confirm-button":!1},on:{input:function(e){return t.$emit("input",e)}}},[n("van-cell-group",[n("van-cell",{attrs:{title:"从相册选择"},on:{click:function(e){t.弹出系统选择框()}}}),n("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.changeFile}}),n("van-cell",{attrs:{title:"拍照"}}),n("van-cell",{attrs:{title:"取消"},on:{click:function(e){return t.$emit("input",!1)}}})],1)],1)],1)},l=[],c=n("28a2"),s={name:"UploadPhoto",props:{value:{type:Boolean,default:!1}},data:function(){return{}},computed:{fileDomObj:function(){return this.$refs["input"]}},methods:{changeFile:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onload=function(t){Object(c["a"])({images:[r.result],showIndex:!1,onClose:function(){e.openDia()}})}},openDia:function(){var t=this;this.$dialog.confirm({title:"是否确认修改头像"}).then(function(){t.updateImage()}).catch(function(){})},updateImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])("photo",this.fileDomObj.files[0]);case 2:e=t.sent,e.photo?(this.$emit("input",!1),this.$emit("upload-success",e.photo)):this.$toast("上传失败");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),"弹出系统选择框":function(){this.fileDomObj.click()}}},d=s,f=n("2877"),h=Object(f["a"])(d,u,l,!1,null,null,null),p=h.exports,m={name:"UserProfile",components:{UploadPhoto:p},data:function(){return{user:{name:null,photo:null,gender:null,birthday:null,realName:null,idNumber:null,idCardFront:null,idCardBack:null,idCardHandheld:null,intro:null},isUploadPhotoShow:!1}},created:function(){this.loadUserProfile()},methods:{handleSave:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["g"])({name:"NoBook"});case 2:this.$toast.success("修改成功"),this.$router.back();case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadUserProfile:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$toast.loading({duration:0,mask:!1,forbidClick:!0,message:"加载中..."}),t.prev=1,t.next=4,Object(i["b"])();case 4:n=t.sent,this.user=n,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$toast.fail("加载用户信息失败");case 11:e.clear();case 12:case"end":return t.stop()}},t,this,[[1,8]])}));function e(){return t.apply(this,arguments)}return e}()}},v=m,b=Object(f["a"])(v,r,a,!1,null,"04bed326",null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-bd24661e.f5dece8c.js.map