(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9769"],{"58f6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-container"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("my-bread",[t._v("评论管理")])],1),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"title",label:"标题",width:"400"}}),a("el-table-column",{attrs:{prop:"total_comment_count",label:"总评论数"}}),a("el-table-column",{attrs:{prop:"fans_comment_count",label:"粉丝评论数"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.comment_status?"正常":"关闭")+"\n        ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.comment_status?a("el-button",{attrs:{type:"warning"},on:{click:function(a){return t.toggelStatus(e.row)}}},[t._v("关闭评论")]):a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.toggelStatus(e.row)}}},[t._v("打开评论")])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper","page-size":t.reqParams.per_page,"current-page":t.reqParams.page,total:t.total},on:{"current-change":t.currentChange}})],1)],1)],1)},r=[],s=(a("96cf"),a("3b8d")),o={data:function(){return{tableData:[],reqParams:{page:1,per_page:10,response_type:"comment"},total:0}},created:function(){this.getComments()},methods:{currentChange:function(t){this.reqParams.page=t,this.getComments()},toggelStatus:function(t){var e=this;this.$confirm("确定要更改当前权限吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function a(){var n,r;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.put("comments/status?article_id=".concat(t.id),{allow_comment:!t.comment_status});case 2:n=a.sent,r=n.data.data,e.$message.success("状态修改成功"),t.comment_status=r.allow_comment;case 6:case"end":return a.stop()}},a)}))).catch(function(){})},getComments:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("articles",{params:this.reqParams});case 2:e=t.sent,a=e.data.data,this.tableData=a.results,this.total=a.total_count;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},c=o,u=a("2877"),l=Object(u["a"])(c,n,r,!1,null,"ccff15a2",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c9769.6f292322.js.map