{"version":3,"sources":["webpack:///./src/views/setting/index.vue?7190","webpack:///src/views/setting/index.vue","webpack:///./src/views/setting/index.vue?48fc","webpack:///./src/views/setting/index.vue","webpack:///./src/eventBus/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","span","model","reqParams","label-width","label","_s","id","mobile","value","callback","$$v","$set","expression","type","rows","on","click","updataUserInfo","action","show-file-list","http-request","myHttpRequest","src","photo","staticStyle","text-align","font-size","staticRenderFns","settingvue_type_script_lang_js_","data","name","intro","email","created","getUserInfo","methods","_this","fd","FormData","append","file","$http","patch","then","res","eventBus","$emit","_updataUserInfo","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","wrap","_context","prev","next","sent","$message","success","stop","apply","arguments","_getUserInfo","_callee2","_ref2","_context2","get","views_settingvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","vue__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","vue__WEBPACK_IMPORTED_MODULE_0___default","n","Vue"],"mappings":"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","file":"js/chunk-4592b9b9.2e6d6ffc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting-container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('my-bread',[_vm._v(\"个人设置\")])],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"grid-content bg-purple\"},[_c('el-form',{attrs:{\"model\":_vm.reqParams,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"编号\"}},[_vm._v(_vm._s(_vm.reqParams.id))]),_c('el-form-item',{attrs:{\"label\":\"手机\"}},[_vm._v(_vm._s(_vm.reqParams.mobile))]),_c('el-form-item',{attrs:{\"label\":\"媒体名称\"}},[_c('el-input',{model:{value:(_vm.reqParams.name),callback:function ($$v) {_vm.$set(_vm.reqParams, \"name\", $$v)},expression:\"reqParams.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"媒体介绍\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.reqParams.intro),callback:function ($$v) {_vm.$set(_vm.reqParams, \"intro\", $$v)},expression:\"reqParams.intro\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{model:{value:(_vm.reqParams.email),callback:function ($$v) {_vm.$set(_vm.reqParams, \"email\", $$v)},expression:\"reqParams.email\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updataUserInfo}},[_vm._v(\"保存设置\")])],1)],1)],1)]),_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"http-request\":_vm.myHttpRequest}},[(_vm.reqParams.photo)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.reqParams.photo}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('p',{staticStyle:{\"text-align\":\"center\",\"font-size\":\"14px\"}},[_vm._v(\"更换头像\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class='setting-container'>\r\n    <el-card>\r\n      <div slot=\"header\">\r\n        <my-bread>个人设置</my-bread>\r\n      </div>\r\n      <el-row>\r\n        <el-col :span=\"12\"><div class=\"grid-content bg-purple\">\r\n        <!-- 左边 -->\r\n          <el-form :model=\"reqParams\" label-width=\"120px\">\r\n            <el-form-item label=\"编号\">{{reqParams.id}}</el-form-item>\r\n            <el-form-item label=\"手机\">{{reqParams.mobile}}</el-form-item>\r\n            <el-form-item label=\"媒体名称\">\r\n              <el-input v-model=\"reqParams.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"媒体介绍\">\r\n              <el-input type=\"textarea\" rows=\"4\" v-model=\"reqParams.intro\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"邮箱\">\r\n              <el-input v-model=\"reqParams.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"updataUserInfo\">保存设置</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div></el-col>\r\n        <el-col :span=\"12\"><div class=\"grid-content bg-purple-light\">\r\n          <!-- 右边区域 -->\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"\"\r\n            :show-file-list=\"false\"\r\n            :http-request=\"myHttpRequest\"\r\n          >\r\n            <img v-if=\"reqParams.photo\" :src=\"reqParams.photo\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n          <p style=\"text-align:center; font-size:14px;\">更换头像</p>\r\n        </div></el-col>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from '@/eventBus'\r\nexport default {\r\n  data () {\r\n    return {\r\n      reqParams: {\r\n        id: null,\r\n        name: null,\r\n        intro: null, // 头条号简介\r\n        photo: null, // 更改头像地址\r\n        email: null,\r\n        mobile: null\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    // 获取用户信息\r\n    this.getUserInfo()\r\n  },\r\n  methods: {\r\n    // 使用自己的请求方法 http-request 调用这个属性会替她原生的请求 隐性携带参数\r\n    myHttpRequest (data) {\r\n      // 使用 axios 上传文件 只能用 formData\r\n      const fd = new FormData()\r\n      fd.append('photo', data.file)\r\n      this.$http.patch('user/photo', fd).then((res) => {\r\n        const { data: { data } } = res\r\n        this.reqParams.photo = data.photo\r\n        eventBus.$emit('upDataPhoto', data.photo)\r\n      })\r\n    },\r\n    // namestring非必须用户名 introstring非必须头条号简介 emailstring非必须邮箱  PATCH   user/profile\r\n    // 保存更改\r\n    async updataUserInfo () {\r\n      const { data: { data } } = await this.$http.patch('user/profile', {\r\n        name: this.reqParams.name,\r\n        intro: this.reqParams.intro,\r\n        email: this.reqParams.email\r\n      })\r\n      this.$message.success('修改成功')\r\n      // 把数据传到home组件里\r\n      eventBus.$emit('upDataUserInfo', data.name)\r\n      // 把本地数据库重新更改 在home组件里完成了\r\n    },\r\n    async getUserInfo () {\r\n      const { data: { data } } = await this.$http.get('user/profile')\r\n      this.reqParams = data\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6442b6e3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6442b6e3\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\n\r\nexport default new Vue({})\r\n"],"sourceRoot":""}